<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.xdweb.first.mapper.BookInfoMapper">
    <resultMap id="BaseResultMap" type="org.xdweb.first.model.BookInfo">
        <id column="bookId" jdbcType="INTEGER" property="bookid" />
        <result column="bookName" jdbcType="VARCHAR" property="bookname" />
        <result column="bookAuthor" jdbcType="VARCHAR" property="bookauthor" />
        <result column="bookPrice" jdbcType="DECIMAL" property="bookprice" />
        <result column="bookTypeId" jdbcType="INTEGER" property="booktypeid" />
        <result column="bookTypeName" jdbcType="INTEGER" property="booktypename" />
        <result column="bookDesc" jdbcType="VARCHAR" property="bookdesc" />
        <result column="isBorrowed" jdbcType="TINYINT" property="isborrowed" />
        <result column="bookImg" jdbcType="TINYINT" property="bookimg" />
    </resultMap>
    <sql id="Base_Column_List">
        bookId, bookName, bookAuthor, bookPrice, bookTypeId, bookDesc, isBorrowed, bookImg
    </sql>

    <select id="selectAll" resultMap="BaseResultMap">
        select bookId, bookName, bookAuthor,bookPrice, bookTypeId, bookDesc,isBorrowed, bookImg,
               (select bookTypeName from book_type where book_type.bookTypeId = book_info.bookTypeId) as bookTypeName
        from book_info
    </select>
</mapper>